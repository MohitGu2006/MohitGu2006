import logging
from telegram import Update
from telegram.ext import ApplicationBuilder, CommandHandler, ContextTypes

# ðŸ”§ Logging setup
logging.basicConfig(format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
                    level=logging.INFO)
logger = logging.getLogger(__name__)

# ðŸ¤– Bot API Token
TOKEN = '7934042014:AAHKYssagK435kGGdcdfuerEaHnr-sicaSI'

# ðŸ“¢ Your Telegram Channel link
CHANNEL_LINK = "https://t.me/BreakingNowUpdates"

# âœ… Function to check if the user is in the Telegram channel
async def is_user_in_channel(update: Update, context: ContextTypes.DEFAULT_TYPE) -> bool:
    user_id = update.message.from_user.id
    try:
        member = await context.bot.get_chat_member('@BreakingNowUpdates', user_id)
        if member.status in ['member', 'administrator', 'creator']:
            return True
    except Exception as e:
        logger.error(f"ðŸš¨ Error checking channel membership: {e}")
    return False

# ðŸ“° Breaking News Command
async def news(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    if not await is_user_in_channel(update, context):
        await update.message.reply_text(
            f"âš ï¸ à¤•à¥ƒà¤ªà¤¯à¤¾ à¤ªà¤¹à¤²à¥‡ à¤¹à¤®à¤¾à¤°à¥‡ à¤šà¥ˆà¤¨à¤² à¤¸à¥‡ à¤œà¥à¤¡à¤¼à¥‡à¤‚: {CHANNEL_LINK} ðŸ“¢")
        return

    news_text = """
ðŸ“° à¤¨à¤®à¤¸à¥à¤•à¤¾à¤°! à¤†à¤œ, 15 à¤«à¤°à¤µà¤°à¥€ 2025, à¤•à¥€ à¤ªà¥à¤°à¤®à¥à¤– à¤¬à¥à¤°à¥‡à¤•à¤¿à¤‚à¤— à¤¸à¤®à¤¾à¤šà¤¾à¤° à¤‡à¤¸ à¤ªà¥à¤°à¤•à¤¾à¤° à¤¹à¥ˆà¤‚:

1ï¸âƒ£ à¤¸à¥€à¤¬à¥€à¤à¤¸à¤ˆ à¤¬à¥‹à¤°à¥à¤¡ à¤•à¥€ à¤ªà¤°à¥€à¤•à¥à¤·à¤¾à¤à¤‚ à¤¶à¥à¤°à¥‚ ðŸŽ“  
à¤•à¥‡à¤‚à¤¦à¥à¤°à¥€à¤¯ à¤®à¤¾à¤§à¥à¤¯à¤®à¤¿à¤• à¤¶à¤¿à¤•à¥à¤·à¤¾ à¤¬à¥‹à¤°à¥à¤¡ à¤•à¥€ 10à¤µà¥€à¤‚ à¤”à¤° 12à¤µà¥€à¤‚ à¤•à¥€ à¤µà¤¾à¤°à¥à¤·à¤¿à¤• à¤ªà¤°à¥€à¤•à¥à¤·à¤¾à¤à¤‚ à¤†à¤œ à¤¸à¥‡ à¤¶à¥à¤°à¥‚ à¤¹à¥‹ à¤—à¤ˆ à¤¹à¥ˆà¤‚à¥¤  

2ï¸âƒ£ à¤¸à¤‚à¤­à¤² à¤¹à¤¿à¤‚à¤¸à¤¾ à¤•à¥‡ à¤†à¤°à¥‹à¤ªà¤¿à¤¯à¥‹à¤‚ à¤•à¥€ à¤¸à¥à¤¨à¤µà¤¾à¤ˆ âš–ï¸  
à¤‰à¤¤à¥à¤¤à¤° à¤ªà¥à¤°à¤¦à¥‡à¤¶ à¤•à¥‡ à¤¸à¤‚à¤­à¤² à¤œà¤¿à¤²à¥‡ à¤®à¥‡à¤‚ à¤¹à¥à¤ˆ à¤¹à¤¿à¤‚à¤¸à¤¾ à¤•à¥‡ 15 à¤†à¤°à¥‹à¤ªà¤¿à¤¯à¥‹à¤‚ à¤•à¥€ à¤œà¤®à¤¾à¤¨à¤¤ à¤¯à¤¾à¤šà¤¿à¤•à¤¾ à¤ªà¤° à¤†à¤œ à¤¸à¥à¤¨à¤µà¤¾à¤ˆ à¤¹à¥‹à¤—à¥€à¥¤  

3ï¸âƒ£ à¤…à¤®à¥ƒà¤¤à¤¸à¤° à¤®à¥‡à¤‚ à¤µà¤¿à¤¶à¥‡à¤· à¤µà¤¿à¤®à¤¾à¤¨ à¤•à¥€ à¤²à¥ˆà¤‚à¤¡à¤¿à¤‚à¤— âœˆï¸  
à¤…à¤®à¥‡à¤°à¤¿à¤•à¤¾ à¤¸à¥‡ à¤¨à¤¿à¤°à¥à¤µà¤¾à¤¸à¤¿à¤¤ 119 à¤­à¤¾à¤°à¤¤à¥€à¤¯à¥‹à¤‚ à¤•à¥‹ à¤²à¥‡à¤•à¤° à¤à¤• à¤µà¤¿à¤¶à¥‡à¤· à¤µà¤¿à¤®à¤¾à¤¨ à¤…à¤®à¥ƒà¤¤à¤¸à¤° à¤®à¥‡à¤‚ à¤²à¥ˆà¤‚à¤¡ à¤•à¤°à¥‡à¤—à¤¾à¥¤  

4ï¸âƒ£ à¤ªà¥à¤²à¤µà¤¾à¤®à¤¾ à¤†à¤¤à¤‚à¤•à¥€ à¤¹à¤®à¤²à¥‡ à¤•à¥€ 6à¤µà¥€à¤‚ à¤¬à¤°à¤¸à¥€ ðŸ•¯ï¸  
à¤†à¤œ à¤ªà¥à¤²à¤µà¤¾à¤®à¤¾ à¤®à¥‡à¤‚ à¤¹à¥à¤ à¤†à¤¤à¤‚à¤•à¥€ à¤¹à¤®à¤²à¥‡ à¤•à¥€ 6à¤µà¥€à¤‚ à¤¬à¤°à¤¸à¥€ à¤¹à¥ˆ, à¤œà¤¿à¤¸à¤®à¥‡à¤‚ 40 à¤¸à¥‡ à¤…à¤§à¤¿à¤• à¤­à¤¾à¤°à¤¤à¥€à¤¯ à¤œà¤µà¤¾à¤¨ à¤¶à¤¹à¥€à¤¦ à¤¹à¥à¤ à¤¥à¥‡à¥¤  

5ï¸âƒ£ à¤µà¥ˆà¤²à¥‡à¤‚à¤Ÿà¤¾à¤‡à¤¨ à¤¡à¥‡ à¤®à¤¨à¤¾à¤¯à¤¾ à¤œà¤¾ à¤°à¤¹à¤¾ à¤¹à¥ˆ â¤ï¸  
à¤†à¤œ à¤µà¥ˆà¤²à¥‡à¤‚à¤Ÿà¤¾à¤‡à¤¨ à¤¡à¥‡ à¤¹à¥ˆ, à¤œà¤¿à¤¸à¥‡ à¤ªà¥à¤°à¥‡à¤®à¥€-à¤ªà¥à¤°à¥‡à¤®à¤¿à¤•à¤¾à¤à¤‚ à¤…à¤ªà¤¨à¥‡ à¤ªà¥à¤¯à¤¾à¤° à¤•à¤¾ à¤‡à¤œà¤¼à¤¹à¤¾à¤° à¤•à¤°à¤¨à¥‡ à¤•à¥‡ à¤²à¤¿à¤ à¤®à¤¨à¤¾ à¤°à¤¹à¥‡ à¤¹à¥ˆà¤‚à¥¤  

6ï¸âƒ£ à¤²à¥‹à¤•à¤¸à¤­à¤¾ à¤®à¥‡à¤‚ à¤¨à¤¯à¤¾ à¤‡à¤¨à¤•à¤® à¤Ÿà¥ˆà¤•à¥à¤¸ à¤¬à¤¿à¤² à¤ªà¥‡à¤¶ ðŸ›ï¸  
à¤µà¤¿à¤¤à¥à¤¤ à¤®à¤‚à¤¤à¥à¤°à¥€ à¤¨à¤¿à¤°à¥à¤®à¤²à¤¾ à¤¸à¥€à¤¤à¤¾à¤°à¤®à¤£ à¤†à¤œ à¤²à¥‹à¤•à¤¸à¤­à¤¾ à¤®à¥‡à¤‚ à¤¨à¤¯à¤¾ à¤‡à¤¨à¤•à¤® à¤Ÿà¥ˆà¤•à¥à¤¸ à¤¬à¤¿à¤² à¤ªà¥‡à¤¶ à¤•à¤°à¥‡à¤‚à¤—à¥€à¥¤  

7ï¸âƒ£ à¤¦à¤¿à¤²à¥à¤²à¥€ à¤®à¥‡à¤‚ à¤¨à¤ˆ à¤¸à¤°à¤•à¤¾à¤° à¤•à¥‡ à¤—à¤ à¤¨ à¤•à¥€ à¤ªà¥à¤°à¤•à¥à¤°à¤¿à¤¯à¤¾ à¤¤à¥‡à¤œ ðŸ†  
à¤¦à¤¿à¤²à¥à¤²à¥€ à¤µà¤¿à¤§à¤¾à¤¨à¤¸à¤­à¤¾ à¤šà¥à¤¨à¤¾à¤µà¥‹à¤‚ à¤®à¥‡à¤‚ à¤­à¤¾à¤œà¤ªà¤¾ à¤•à¥€ à¤ªà¥à¤°à¤šà¤‚à¤¡ à¤œà¥€à¤¤ à¤•à¥‡ à¤¬à¤¾à¤¦, à¤¨à¤ˆ à¤¸à¤°à¤•à¤¾à¤° à¤•à¥‡ à¤—à¤ à¤¨ à¤•à¥€ à¤ªà¥à¤°à¤•à¥à¤°à¤¿à¤¯à¤¾ à¤¤à¥‡à¤œ à¤¹à¥‹ à¤—à¤ˆ à¤¹à¥ˆà¥¤  

8ï¸âƒ£ à¤•à¤¿à¤¸à¤¾à¤¨ à¤¨à¥‡à¤¤à¤¾à¤“à¤‚ à¤”à¤° à¤¸à¤°à¤•à¤¾à¤° à¤•à¥‡ à¤¬à¥€à¤š à¤¬à¥ˆà¤ à¤• ðŸŒ¾  
à¤•à¤¿à¤¸à¤¾à¤¨ à¤¨à¥‡à¤¤à¤¾à¤“à¤‚ à¤”à¤° à¤•à¥‡à¤‚à¤¦à¥à¤° à¤¸à¤°à¤•à¤¾à¤° à¤•à¥‡ à¤¬à¥€à¤š à¤†à¤œ MSP à¤ªà¤° à¤•à¤¾à¤¨à¥‚à¤¨à¥€ à¤—à¤¾à¤°à¤‚à¤Ÿà¥€ à¤¦à¥‡à¤¨à¥‡ à¤ªà¤° à¤šà¤°à¥à¤šà¤¾ à¤¹à¥‹à¤—à¥€à¥¤  

9ï¸âƒ£ à¤ªà¤‚à¤œà¤¾à¤¬ à¤®à¥‡à¤‚ VHP à¤¨à¥‡à¤¤à¤¾ à¤¹à¤¤à¥à¤¯à¤¾à¤•à¤¾à¤‚à¤¡ à¤®à¥‡à¤‚ NIA à¤•à¤¾ à¤à¤•à¥à¤¶à¤¨ ðŸš”  
à¤ªà¤‚à¤œà¤¾à¤¬ à¤®à¥‡à¤‚ VHP à¤¨à¥‡à¤¤à¤¾ à¤•à¥€ à¤¹à¤¤à¥à¤¯à¤¾ à¤•à¥‡ à¤®à¤¾à¤®à¤²à¥‡ à¤®à¥‡à¤‚ NIA à¤¨à¥‡ à¤¦à¥‹ à¤†à¤¤à¤‚à¤•à¤¿à¤¯à¥‹à¤‚ à¤•à¥‡ à¤–à¤¿à¤²à¤¾à¤« à¤šà¤¾à¤°à¥à¤œà¤¶à¥€à¤Ÿ à¤¦à¤¾à¤¯à¤° à¤•à¥€ à¤¹à¥ˆà¥¤  

ðŸ”Ÿ à¤…à¤‚à¤¤à¤°à¤¿à¤•à¥à¤· à¤¯à¤¾à¤¤à¥à¤°à¥€ à¤¸à¥à¤¨à¥€à¤¤à¤¾ à¤µà¤¿à¤²à¤¿à¤¯à¤®à¥à¤¸ à¤•à¥€ à¤µà¤¾à¤ªà¤¸à¥€ ðŸš€  
à¤…à¤‚à¤¤à¤°à¤¿à¤•à¥à¤· à¤®à¥‡à¤‚ à¤†à¤  à¤®à¤¹à¥€à¤¨à¥‡ à¤¬à¤¿à¤¤à¤¾à¤¨à¥‡ à¤•à¥‡ à¤¬à¤¾à¤¦, à¤¨à¤¾à¤¸à¤¾ à¤•à¥€ à¤…à¤‚à¤¤à¤°à¤¿à¤•à¥à¤· à¤¯à¤¾à¤¤à¥à¤°à¥€ à¤¸à¥à¤¨à¥€à¤¤à¤¾ à¤µà¤¿à¤²à¤¿à¤¯à¤®à¥à¤¸ à¤œà¤²à¥à¤¦ à¤¹à¥€ à¤§à¤°à¤¤à¥€ à¤ªà¤° à¤²à¥Œà¤Ÿà¥‡à¤‚à¤—à¥€à¥¤  

ðŸ“Œ à¤¤à¤¾à¤œà¤¼à¤¾ à¤…à¤ªà¤¡à¥‡à¤Ÿ à¤•à¥‡ à¤²à¤¿à¤ /news à¤Ÿà¤¾à¤‡à¤ª à¤•à¤°à¥‡à¤‚ ðŸ”¥
"""
    await update.message.reply_text(news_text)

# ðŸš€ Start Command
async def start(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    if not await is_user_in_channel(update, context):
        await update.message.reply_text(
            f"ðŸš€ à¤¸à¥à¤µà¤¾à¤—à¤¤ à¤¹à¥ˆ! ðŸ™ à¤‡à¤¸ à¤¬à¥‰à¤Ÿ à¤•à¤¾ à¤‰à¤ªà¤¯à¥‹à¤— à¤•à¤°à¤¨à¥‡ à¤•à¥‡ à¤²à¤¿à¤ à¤ªà¤¹à¤²à¥‡ à¤¹à¤®à¤¾à¤°à¥‡ à¤šà¥ˆà¤¨à¤² à¤¸à¥‡ à¤œà¥à¤¡à¤¼à¥‡à¤‚: {CHANNEL_LINK}")
        return

    user_name = update.message.from_user.first_name
    welcome_message = f"""
ðŸŽ‰ à¤¨à¤®à¤¸à¥à¤¤à¥‡ {user_name}! ðŸ¤—  
à¤†à¤ªà¤•à¤¾ BREAKING NEWS BOT à¤®à¥‡à¤‚ à¤¸à¥à¤µà¤¾à¤—à¤¤ à¤¹à¥ˆ! ðŸš€  

ðŸ”¥ à¤¯à¤¹à¤¾à¤ à¤†à¤ªà¤•à¥‹ à¤®à¤¿à¤²à¥‡à¤‚à¤—à¥€ à¤¤à¥‡à¤œ à¤”à¤° à¤¤à¤¾à¤œà¤¼à¤¾ à¤–à¤¼à¤¬à¤°à¥‡à¤‚,  
ðŸ—³ï¸ à¤°à¥‹à¤šà¤• à¤ªà¥‹à¤²à¥à¤¸,  
ðŸ“¢ à¤”à¤° à¤¬à¤¹à¥à¤¤ à¤•à¥à¤›!  

ðŸ“ à¤…à¤­à¥€ à¤¶à¥à¤°à¥‚ à¤•à¤°à¥‡à¤‚  
ðŸ‘‰ /news - à¤†à¤œ à¤•à¥€ à¤¤à¤¾à¤œà¤¼à¤¾ à¤–à¤¬à¤°à¥‡à¤‚ ðŸ“°  
ðŸ‘‰ /poll - à¤†à¤œ à¤•à¤¾ à¤¬à¤¡à¤¼à¤¾ à¤¸à¤µà¤¾à¤² â“  

âš¡ à¤†à¤ªà¤•à¥€ à¤…à¤ªà¤¡à¥‡à¤Ÿà¥‡à¤¡ à¤¦à¥à¤¨à¤¿à¤¯à¤¾ à¤¸à¤¿à¤°à¥à¤« à¤à¤• à¤•à¥à¤²à¤¿à¤• à¤¦à¥‚à¤° à¤¹à¥ˆ! ðŸŒŽ  
"""
    await update.message.reply_text(welcome_message)

# ðŸ—³ï¸ Poll Command - à¤†à¤œ à¤•à¤¾ à¤¬à¤¡à¤¼à¤¾ à¤¸à¤µà¤¾à¤²
async def poll(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    if not await is_user_in_channel(update, context):
        await update.message.reply_text(
            f"âš ï¸ à¤ªà¤¹à¤²à¥‡ à¤¹à¤®à¤¾à¤°à¥‡ à¤šà¥ˆà¤¨à¤² à¤¸à¥‡ à¤œà¥à¤¡à¤¼à¥‡à¤‚: {CHANNEL_LINK} ðŸ“¢")
        return

    question = "ðŸ¤” à¤•à¥à¤¯à¤¾ à¤¸à¤°à¤•à¤¾à¤° à¤•à¥‹ à¤¨à¥à¤¯à¥‚à¤¨à¤¤à¤® à¤¸à¤®à¤°à¥à¤¥à¤¨ à¤®à¥‚à¤²à¥à¤¯ (MSP) à¤ªà¤° à¤•à¤¾à¤¨à¥‚à¤¨à¥€ à¤—à¤¾à¤°à¤‚à¤Ÿà¥€ à¤¦à¥‡à¤¨à¥€ à¤šà¤¾à¤¹à¤¿à¤?"  
    options = ["âœ… à¤¹à¤¾à¤‚, à¤¯à¤¹ à¤œà¤¼à¤°à¥‚à¤°à¥€ à¤¹à¥ˆ", "âŒ à¤¨à¤¹à¥€à¤‚, à¤‡à¤¸à¤•à¥€ à¤œà¤°à¥‚à¤°à¤¤ à¤¨à¤¹à¥€à¤‚", "ðŸ¤· à¤®à¥à¤à¥‡ à¤œà¤¾à¤¨à¤•à¤¾à¤°à¥€ à¤¨à¤¹à¥€à¤‚", "ðŸ›ï¸ à¤¸à¤°à¤•à¤¾à¤° à¤•à¥‹ à¤–à¥à¤¦ à¤¤à¤¯ à¤•à¤°à¤¨à¤¾ à¤šà¤¾à¤¹à¤¿à¤"]

    await context.bot.send_poll(
        chat_id=update.message.chat_id,
        question=question,
        options=options,
        is_anonymous=False
    )

# ðŸ”¥ Main function to set up the bot
def main() -> None:
    app = ApplicationBuilder().token(TOKEN).build()

    # Register command handlers
    app.add_handler(CommandHandler("start", start))
    app.add_handler(CommandHandler("poll", poll))  # à¤†à¤œ à¤•à¤¾ à¤¬à¤¡à¤¼à¤¾ à¤¸à¤µà¤¾à¤² Poll
    app.add_handler(CommandHandler("news", news))

    # Run the bot
    app.run_polling()

if __name__ == '__main__':
    main()
